<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>nolanwhy's Repo</title>
    <style>
    body {
        font-family: sans-serif;
    }
    .pkglist .card img{
        width: 100px;
        height: 100px;
    }
    .pkglist .card .h2{
        margin: 0;
    }
    .d-flex{
        display: flex;
    }
    </style>
</head>
<body style="margin: 0;">
    <h1 style="margin: 0;">Windows 96 v3 Malware</h1>
    <h2 style="margin: 0;color: red;">We are not responsible for any destruction of your system.</h2>
    <p>Add <strong>https://nolanwhy.github.io/w96-repo/v3/malware</strong> as a source on the Package Manager.</p>
    <h4>Included Packages:</h4>
    <div class="pkglist">Please wait...</div>
    <script type="module">
    const pkglist = document.querySelector(".pkglist");
    const request = await fetch("./Packages.json", {
        method: "GET",
        headers: {
            "Accept": "application/json"
        }
    });
    const response = await request.json();
    pkglist.innerHTML = "";
    for(var i = 0; i < response.length; i++) {
        const pkg = document.createElement("div");
        pkg.className = "card";
        pkg.style.marginBottom = "15px";

        const info = document.createElement("div");
        info.className = "d-flex";
        pkg.appendChild(info);

        const icon = document.createElement("img");
        let iconFile;
        if(response[i]["iconFiles"]["128x128"]) {
            iconFile = response[i]["iconFiles"]["128x128"];
        } else {
            if(response[i]["iconFiles"]["64x64"]) {
                iconFile = response[i]["iconFiles"]["64x64"];
            } else {
                if(response[i]["iconFiles"]["32x32"]) {
                    iconFile = response[i]["iconFiles"]["32x32"];
                } else {
                    if(response[i]["iconFiles"]["16x16"]) {
                        iconFile = response[i]["iconFiles"]["16x16"];
                    }
                }
            }
        }
        iconFile = iconFile.split('/');
        iconFile = iconFile[iconFile.length - 1];
        icon.src = "./dist/" + response[i]["name"].slice(0,1) + "/" + response[i]["name"] + "/" + iconFile;
        info.appendChild(icon);

        const infoText = document.createElement("div");
        infoText.style.marginLeft = "10px";
        info.appendChild(infoText);

        const title = document.createElement("h2");
        title.innerText = response[i]["friendlyName"];
        title.style.margin = "0";
        infoText.appendChild(title);

        const description = document.createElement("h5");
        description.innerText = response[i]["description"];
        description.style.margin = "0";
        infoText.appendChild(description);

        const version = document.createElement("h5");
        version.innerText = "Version " + response[i]["version"];
        version.style.margin = "0";
        infoText.appendChild(version);

        const testPako96 = document.createElement("button");
        testPako96.pkg = response[i]["name"];
        testPako96.addEventListener("click", () => {
            window.location = "https://onofficiel.codeberg.page/pako96/pkg/?r=https://nolanwhy.github.io/w96-repo/v3&pkg=" + testPako96.pkg;
        });
        testPako96.style.background = "url(https://onofficiel.codeberg.page/pako96/src/img/icon_l.svg)";
        testPako96.style.backgroundSize = "cover";
        // testPako96.style.border = "none";
        testPako96.style.padding = "0";
        testPako96.style.width = "100px";
        testPako96.style.height = "40px";
        testPako96.innerText = "Test with Pako96";
        infoText.appendChild(testPako96);

        pkglist.appendChild(pkg);
    }
    </script>
</body>
</html>